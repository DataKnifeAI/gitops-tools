# Example RunnerDeployment for GitHub Actions Runner Controller
# This file is for reference only - create your own RunnerDeployment
# after the controller is deployed
#
# Apply this after the controller is running:
#   kubectl apply -f runnerdeployment-example.yaml

apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: github-runner-deployment
  namespace: managed-cicd
spec:
  replicas: 1
  template:
    spec:
      # Repository-level runner (attached to a specific repository)
      repository: <YOUR_GITHUB_ORG>/<YOUR_REPO>
      
      # Alternative: Organization-level runner (available to all repos in org)
      # organization: <YOUR_GITHUB_ORG>
      
      # Alternative: Enterprise-level runner (available across enterprise)
      # enterprise: <YOUR_ENTERPRISE_NAME>
      
      # Runner labels (optional)
      labels:
        - self-hosted
        - kubernetes
        - linux
      
      # Docker image for runner
      image: summerwind/actions-runner:latest
      
      # Resources for runner pod
      resources:
        requests:
          cpu: 100m
          memory: 128Mi
        limits:
          cpu: 2000m
          memory: 4Gi
      
      # Service account (optional)
      # serviceAccountName: github-runner
      
      # Environment variables (optional)
      env:
        - name: RUNNER_NAME
          value: "kubernetes-runner"
      
      # Volume mounts (optional)
      # volumeMounts:
      #   - name: docker-sock
      #     mountPath: /var/run/docker.sock
      # volumes:
      #   - name: docker-sock
      #     hostPath:
      #       path: /var/run/docker.sock
