# Vector Syslog Service for UniFi CEF Input
#
# This service exposes Vector's syslog receiver via NodePort for external access.
# UniFi devices will send CEF-formatted syslog to this service.
# Vector will parse the CEF format and forward to Loki.
#
apiVersion: v1
kind: Service
metadata:
  name: vector-syslog
  namespace: managed-syslog
  labels:
    app: vector
    component: syslog
    managed-by: gitops
    cluster: nprd-apps
spec:
  type: ClusterIP
  ports:
  - name: syslog-udp
    port: 514
    targetPort: 514
    protocol: UDP
    # UDP syslog port - UniFi devices send CEF syslog here
  - name: metrics
    port: 9598
    targetPort: 9598
    protocol: TCP
    # Metrics and health endpoint - exposed via ingress
  selector:
    # Match Vector pod labels
    app: vector
    component: syslog
  # Note: Vector automatically receives syslog on UDP 514 and parses CEF format
  # No additional configuration needed - logs are automatically forwarded to Loki
